{"version":3,"file":"gatsby-browser.js","sources":["../src/constants.ts","../src/gatsby-browser.ts"],"sourcesContent":["export const BROWSER_STORE_KEY = '__GATSBY_SOURCE_PRISMIC__'\n\nexport const IMAGE_FIELD_KEYS = [\n  'alt',\n  'copyright',\n  'dimensions',\n  'url',\n] as const\n\nexport const API_PAGE_SIZE = 100\n\nexport const UUID_NAMESPACE = `638f7a53-c567-4eca-8fc1-b23efb1cfb2b`\n\nexport const PLACEHOLDER_NODE_TYPE_SUFFIX = '__PLACEHOLDER'\n","import md5 from 'md5'\nimport omit from 'lodash.omit'\n\nimport { BROWSER_STORE_KEY } from './constants'\n\nimport { GatsbyBrowser } from 'gatsby'\nimport { BrowserPluginOptions } from './types'\n\ndeclare global {\n  interface Window {\n    [BROWSER_STORE_KEY]: BrowserPluginOptionsStore\n  }\n}\n\nexport interface BrowserPluginOptionsStore {\n  [key: string]: {\n    pluginOptions: BrowserPluginOptions\n    schemasDigest: string\n  }\n}\n\nexport const onClientEntry: GatsbyBrowser['onClientEntry'] = (\n  _gatsbyContext,\n  pluginOptions: BrowserPluginOptions,\n) => {\n  const params = new URLSearchParams(window.location.search)\n  const isPreviewSession = params.has('token') && params.has('documentId')\n\n  if (!isPreviewSession) return\n\n  window[BROWSER_STORE_KEY] = window[BROWSER_STORE_KEY] || {}\n\n  Object.assign(window[BROWSER_STORE_KEY], {\n    [pluginOptions.repositoryName]: {\n      pluginOptions: omit(pluginOptions, ['schemas', 'plugins']),\n      schemasDigest: md5(JSON.stringify(pluginOptions.schemas)),\n    },\n  })\n}\n"],"names":[],"mappings":";;;;;;;;;AAAO,MAAM,iBAAiB,GAAG,2BAA2B;;MCqB/C,aAAa,GAAmC,CAC3D,cAAc,EACd,aAAmC;IAEnC,MAAM,MAAM,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAA;IAC1D,MAAM,gBAAgB,GAAG,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;IAExE,IAAI,CAAC,gBAAgB;QAAE,OAAM;IAE7B,MAAM,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAA;IAE3D,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAE;QACvC,CAAC,aAAa,CAAC,cAAc,GAAG;YAC9B,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;YAC1D,aAAa,EAAE,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;SAC1D;KACF,CAAC,CAAA;AACJ;;;;"}